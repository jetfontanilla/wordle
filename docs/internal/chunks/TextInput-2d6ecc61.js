import{S as z,i as F,s as L,e as R,c as b,b as _,N as h,g as T,O as y,d as k,P as N,a as P,H as A,Q as S,R as B,v as D,T as H}from"./vendor-40a01dac.js";function E(t,e,o){const s=t.slice();return s[12]=e[o],s[13]=e,s[14]=o,s}function C(t){let e,o,s,n=t[14],i,r;const f=()=>t[4](e,n),p=()=>t[4](null,n);function d(...u){return t[5](t[14],...u)}function m(...u){return t[6](t[14],...u)}function v(...u){return t[7](t[14],...u)}return{c(){e=R("input"),this.h()},l(u){e=b(u,"INPUT",{size:!0,maxlength:!0,class:!0,type:!0,pattern:!0}),this.h()},h(){var u;_(e,"size","1"),_(e,"maxlength","1"),_(e,"class","letter svelte-1k2v0m0"),_(e,"type","text"),_(e,"pattern","[A-Za-z]"),e.value=o=t[12].value,e.readOnly=s=t[0].readonly?"readonly":void 0,h(e,"readonly",t[0].readonly),h(e,"correct",t[12].correct),h(e,"exists",!t[12].correct&&t[12].exists),h(e,"incorrect",!((u=t[12].exists)!=null?u:!0))},m(u,c){T(u,e,c),f(),i||(r=[y(e,"keydown",d),y(e,"keyup",m),y(e,"input",v)],i=!0)},p(u,c){var g;t=u,c&1&&o!==(o=t[12].value)&&e.value!==o&&(e.value=o),c&1&&s!==(s=t[0].readonly?"readonly":void 0)&&(e.readOnly=s),n!==t[14]&&(p(),n=t[14],f()),c&1&&h(e,"readonly",t[0].readonly),c&1&&h(e,"correct",t[12].correct),c&1&&h(e,"exists",!t[12].correct&&t[12].exists),c&1&&h(e,"incorrect",!((g=t[12].exists)!=null?g:!0))},d(u){u&&k(e),p(),i=!1,N(r)}}}function V(t){let e,o=t[0].state,s=[];for(let n=0;n<o.length;n+=1)s[n]=C(E(t,o,n));return{c(){e=R("div");for(let n=0;n<s.length;n+=1)s[n].c();this.h()},l(n){e=b(n,"DIV",{class:!0});var i=P(e);for(let r=0;r<s.length;r+=1)s[r].l(i);i.forEach(k),this.h()},h(){_(e,"class","attempt")},m(n,i){T(n,e,i);for(let r=0;r<s.length;r+=1)s[r].m(e,null)},p(n,[i]){if(i&15){o=n[0].state;let r;for(r=0;r<o.length;r+=1){const f=E(n,o,r);s[r]?s[r].p(f,i):(s[r]=C(f),s[r].c(),s[r].m(e,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=o.length}},i:A,o:A,d(n){n&&k(e),S(s,n)}}}const w="ArrowLeft",I="ArrowRight",W="Backspace",O="Enter";function j(t,e,o){let{attempt:s}=e,n=[];const i=B();function r(a,l){s.readonly||[w,I,O].includes(l)||o(1,n[a].value="",n)}function f(){var a;s.readonly||(a=n[0])==null||a.focus()}function p(a,l){if(!(s.readonly||!l)){if(l==O)return f(),i("stateChange",{index:a,letter:l,submit:!0});if(console.log("input",l),l==w||l==W)return m(a);if(l==I)return d(a);l.length>1||!/[a-z]/i.test(l)||(console.log("inputValue",n[a].value),o(1,n[a].value=l,n),i("stateChange",{index:a,letter:l,submit:!1}),d(a))}}function d(a){n[a+1]&&n[a+1].focus()}function m(a){n[a-1]&&n[a-1].focus()}D(()=>{f()});function v(a,l){H[a?"unshift":"push"](()=>{n[l]=a,o(1,n)})}const u=(a,l)=>r(a,l.key),c=(a,l)=>p(a,l.key),g=(a,l)=>p(a,l.key);return t.$$set=a=>{"attempt"in a&&o(0,s=a.attempt)},[s,n,r,p,v,u,c,g]}class G extends z{constructor(e){super();F(this,e,j,V,L,{attempt:0})}}export{G as T};
