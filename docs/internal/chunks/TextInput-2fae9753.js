import{S as N,i as P,s as S,e as E,c as A,b as d,N as h,g as I,O as k,d as b,P as V,a as B,H as w,Q as H,R as W,v as j,T as q}from"./vendor-40a01dac.js";function z(s,e,o){const a=s.slice();return a[14]=e[o],a[15]=e,a[16]=o,a}function O(s){let e,o,a,n=s[16],i,r;const f=()=>s[5](e,n),p=()=>s[5](null,n);function g(...l){return s[6](s[16],...l)}function m(...l){return s[7](s[16],...l)}function _(...l){return s[8](s[16],...l)}return{c(){e=E("input"),this.h()},l(l){e=A(l,"INPUT",{size:!0,maxlength:!0,class:!0,type:!0,pattern:!0}),this.h()},h(){var l;d(e,"size","1"),d(e,"maxlength","1"),d(e,"class","letter svelte-1k2v0m0"),d(e,"type","text"),d(e,"pattern","[A-Za-z]"),e.value=o=s[14].value,e.readOnly=a=s[0].readonly?"readonly":void 0,h(e,"readonly",s[0].readonly),h(e,"correct",s[14].correct),h(e,"exists",!s[14].correct&&s[14].exists),h(e,"incorrect",!((l=s[14].exists)!=null?l:!0))},m(l,c){I(l,e,c),f(),i||(r=[k(e,"keydown",g),k(e,"keyup",m),k(e,"input",_)],i=!0)},p(l,c){var v;s=l,c&1&&o!==(o=s[14].value)&&e.value!==o&&(e.value=o),c&1&&a!==(a=s[0].readonly?"readonly":void 0)&&(e.readOnly=a),n!==s[16]&&(p(),n=s[16],f()),c&1&&h(e,"readonly",s[0].readonly),c&1&&h(e,"correct",s[14].correct),c&1&&h(e,"exists",!s[14].correct&&s[14].exists),c&1&&h(e,"incorrect",!((v=s[14].exists)!=null?v:!0))},d(l){l&&b(e),p(),i=!1,V(r)}}}function G(s){let e,o=s[0].state,a=[];for(let n=0;n<o.length;n+=1)a[n]=O(z(s,o,n));return{c(){e=E("div");for(let n=0;n<a.length;n+=1)a[n].c();this.h()},l(n){e=A(n,"DIV",{class:!0});var i=B(e);for(let r=0;r<a.length;r+=1)a[r].l(i);i.forEach(b),this.h()},h(){d(e,"class","attempt")},m(n,i){I(n,e,i);for(let r=0;r<a.length;r+=1)a[r].m(e,null)},p(n,[i]){if(i&31){o=n[0].state;let r;for(r=0;r<o.length;r+=1){const f=z(n,o,r);a[r]?a[r].p(f,i):(a[r]=O(f),a[r].c(),a[r].m(e,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=o.length}},i:w,o:w,d(n){n&&b(e),H(a,n)}}}const R="ArrowLeft",T="ArrowRight",D="Backspace",C="Enter";function K(s,e,o){let{attempt:a}=e,n=[];const i=W(),r="ontouchstart"in document.documentElement;function f(t,u){a.readonly||[R,T,C].includes(u)||o(1,n[t].value="",n)}function p(){var t;a.readonly||(t=n[0])==null||t.focus()}function g(t,u){if(!(a.readonly||!u)){if(u==C)return p(),i("stateChange",{index:t,letter:u,submit:!0});if(u==R||u==D)return l(t);if(u==T)return _(t);r||u.length>1||!/[a-z]/i.test(u)||(i("stateChange",{index:t,letter:u,submit:!1}),_(t))}}function m(t,u){if(a.readonly)return;if(u==C)return p(),i("stateChange",{index:t,letter:u,submit:!0});if(console.log("input",u),u==R||u==D)return l(t);if(u==T)return _(t);const y=n[t].value.substring(-1);console.log("inputValue",n[t].value,y),!(!y||!/[a-z]/i.test(y))&&(o(1,n[t].value=y,n),i("stateChange",{index:t,letter:u,submit:!1}),_(t))}function _(t){n[t+1]&&n[t+1].focus()}function l(t){n[t-1]&&n[t-1].focus()}j(()=>{p()});function c(t,u){q[t?"unshift":"push"](()=>{n[u]=t,o(1,n)})}const v=(t,u)=>f(t,u.key),F=(t,u)=>g(t,u.key),L=(t,u)=>m(t,u.key);return s.$$set=t=>{"attempt"in t&&o(0,a=t.attempt)},[a,n,f,g,m,c,v,F,L]}class Q extends N{constructor(e){super();P(this,e,K,G,S,{attempt:0})}}export{Q as T};
