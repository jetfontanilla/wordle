import{S as N,i as P,s as S,e as E,c as A,b as d,N as h,g as I,O as k,d as b,P as V,a as B,H as w,Q as H,R as W,v as j,T as q}from"./vendor-40a01dac.js";function z(s,e,o){const a=s.slice();return a[14]=e[o],a[15]=e,a[16]=o,a}function O(s){let e,o,a,n=s[16],l,u;const f=()=>s[5](e,n),p=()=>s[5](null,n);function g(...i){return s[6](s[16],...i)}function m(...i){return s[7](s[16],...i)}function _(...i){return s[8](s[16],...i)}return{c(){e=E("input"),this.h()},l(i){e=A(i,"INPUT",{size:!0,maxlength:!0,class:!0,type:!0,pattern:!0}),this.h()},h(){var i;d(e,"size","1"),d(e,"maxlength","1"),d(e,"class","letter svelte-1k2v0m0"),d(e,"type","text"),d(e,"pattern","[A-Za-z]"),e.value=o=s[14].value,e.readOnly=a=s[0].readonly?"readonly":void 0,h(e,"readonly",s[0].readonly),h(e,"correct",s[14].correct),h(e,"exists",!s[14].correct&&s[14].exists),h(e,"incorrect",!((i=s[14].exists)!=null?i:!0))},m(i,c){I(i,e,c),f(),l||(u=[k(e,"keydown",g),k(e,"keyup",m),k(e,"input",_)],l=!0)},p(i,c){var v;s=i,c&1&&o!==(o=s[14].value)&&e.value!==o&&(e.value=o),c&1&&a!==(a=s[0].readonly?"readonly":void 0)&&(e.readOnly=a),n!==s[16]&&(p(),n=s[16],f()),c&1&&h(e,"readonly",s[0].readonly),c&1&&h(e,"correct",s[14].correct),c&1&&h(e,"exists",!s[14].correct&&s[14].exists),c&1&&h(e,"incorrect",!((v=s[14].exists)!=null?v:!0))},d(i){i&&b(e),p(),l=!1,V(u)}}}function G(s){let e,o=s[0].state,a=[];for(let n=0;n<o.length;n+=1)a[n]=O(z(s,o,n));return{c(){e=E("div");for(let n=0;n<a.length;n+=1)a[n].c();this.h()},l(n){e=A(n,"DIV",{class:!0});var l=B(e);for(let u=0;u<a.length;u+=1)a[u].l(l);l.forEach(b),this.h()},h(){d(e,"class","attempt")},m(n,l){I(n,e,l);for(let u=0;u<a.length;u+=1)a[u].m(e,null)},p(n,[l]){if(l&31){o=n[0].state;let u;for(u=0;u<o.length;u+=1){const f=z(n,o,u);a[u]?a[u].p(f,l):(a[u]=O(f),a[u].c(),a[u].m(e,null))}for(;u<a.length;u+=1)a[u].d(1);a.length=o.length}},i:w,o:w,d(n){n&&b(e),H(a,n)}}}const R="ArrowLeft",T="ArrowRight",D="Backspace",C="Enter";function K(s,e,o){let{attempt:a}=e,n=[];const l=W(),u="ontouchstart"in document.documentElement;function f(t,r){a.readonly||[R,T,C].includes(r)||o(1,n[t].value="",n)}function p(){var t;a.readonly||(t=n[0])==null||t.focus()}function g(t,r){if(!(a.readonly||!r)){if(r==C)return p(),l("stateChange",{index:t,letter:r,submit:!0});if(r==R||r==D)return i(t);if(r==T)return _(t);u||r.length>1||!/[a-z]/i.test(r)||(l("stateChange",{index:t,letter:r,submit:!1}),_(t))}}function m(t,r){if(a.readonly)return;if(r==C)return p(),l("stateChange",{index:t,letter:r,submit:!0});if(r==R||r==D)return i(t);if(r==T)return _(t);const y=(n[t].value||r).substring(-1);console.log("inputValue",y),!(!y||!/[a-z]/i.test(y))&&(l("stateChange",{index:t,letter:r,submit:!1}),_(t))}function _(t){n[t+1]&&n[t+1].focus()}function i(t){n[t-1]&&n[t-1].focus()}j(()=>{p()});function c(t,r){q[t?"unshift":"push"](()=>{n[r]=t,o(1,n)})}const v=(t,r)=>f(t,r.key),F=(t,r)=>g(t,r.key),L=(t,r)=>m(t,r.key);return s.$$set=t=>{"attempt"in t&&o(0,a=t.attempt)},[a,n,f,g,m,c,v,F,L]}class Q extends N{constructor(e){super();P(this,e,K,G,S,{attempt:0})}}export{Q as T};
