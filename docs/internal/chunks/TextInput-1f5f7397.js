import{S as O,i as z,s as F,e as y,c as k,b as _,N as h,g as R,O as b,d as v,P as L,a as N,H as T,Q as P,R as S,v as B,T as D}from"./vendor-40a01dac.js";function A(n,e,l){const s=n.slice();return s[11]=e[l],s[12]=e,s[13]=l,s}function E(n){let e,l,s,t=n[13],u,a;const f=()=>n[4](e,t),d=()=>n[4](null,t);function p(...o){return n[5](n[13],...o)}function m(...o){return n[6](n[13],...o)}return{c(){e=y("input"),this.h()},l(o){e=k(o,"INPUT",{size:!0,maxlength:!0,class:!0,type:!0,pattern:!0}),this.h()},h(){var o;_(e,"size","1"),_(e,"maxlength","1"),_(e,"class","letter svelte-1k2v0m0"),_(e,"type","text"),_(e,"pattern","[A-Za-z]"),e.value=l=n[11].value,e.readOnly=s=n[0].readonly?"readonly":void 0,h(e,"readonly",n[0].readonly),h(e,"correct",n[11].correct),h(e,"exists",!n[11].correct&&n[11].exists),h(e,"incorrect",!((o=n[11].exists)!=null?o:!0))},m(o,c){R(o,e,c),f(),u||(a=[b(e,"keydown",p),b(e,"keyup",m)],u=!0)},p(o,c){var g;n=o,c&1&&l!==(l=n[11].value)&&e.value!==l&&(e.value=l),c&1&&s!==(s=n[0].readonly?"readonly":void 0)&&(e.readOnly=s),t!==n[13]&&(d(),t=n[13],f()),c&1&&h(e,"readonly",n[0].readonly),c&1&&h(e,"correct",n[11].correct),c&1&&h(e,"exists",!n[11].correct&&n[11].exists),c&1&&h(e,"incorrect",!((g=n[11].exists)!=null?g:!0))},d(o){o&&v(e),d(),u=!1,L(a)}}}function H(n){let e,l=n[0].state,s=[];for(let t=0;t<l.length;t+=1)s[t]=E(A(n,l,t));return{c(){e=y("div");for(let t=0;t<s.length;t+=1)s[t].c();this.h()},l(t){e=k(t,"DIV",{class:!0});var u=N(e);for(let a=0;a<s.length;a+=1)s[a].l(u);u.forEach(v),this.h()},h(){_(e,"class","attempt")},m(t,u){R(t,e,u);for(let a=0;a<s.length;a+=1)s[a].m(e,null)},p(t,[u]){if(u&15){l=t[0].state;let a;for(a=0;a<l.length;a+=1){const f=A(t,l,a);s[a]?s[a].p(f,u):(s[a]=E(f),s[a].c(),s[a].m(e,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=l.length}},i:T,o:T,d(t){t&&v(e),P(s,t)}}}const C="ArrowLeft",w="ArrowRight",W="Backspace",I="Enter";function j(n,e,l){let{attempt:s}=e,t=[];const u=S();function a(r,i){s.readonly||[C,w,I].includes(i)||l(1,t[r].value="",t)}function f(){var r;s.readonly||(r=t[0])==null||r.focus()}function d(r,i){if(!s.readonly){if(i==I)return f(),u("stateChange",{index:r,letter:i,submit:!0});if(i==C||i==W)return m(r);if(i==w)return p(r);i.length>1||!/[a-z]/i.test(i)||(u("stateChange",{index:r,letter:i,submit:!1}),p(r))}}function p(r){t[r+1]&&t[r+1].focus()}function m(r){t[r-1]&&t[r-1].focus()}B(()=>{f()});function o(r,i){D[r?"unshift":"push"](()=>{t[i]=r,l(1,t)})}const c=(r,i)=>a(r,i.key),g=(r,i)=>d(r,i.key);return n.$$set=r=>{"attempt"in r&&l(0,s=r.attempt)},[s,t,a,d,o,c,g]}class G extends O{constructor(e){super();z(this,e,j,H,F,{attempt:0})}}export{G as T};
